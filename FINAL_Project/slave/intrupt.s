PIO_PER EQU 0x400E0E00
PIO_SODR EQU 0x400E0E30
PIO_CODR EQU 0x400E0E34
PIO_OER EQU 0x400E0E10
PIO_PDSR EQU 0x400E0E3C
PIO_ISR EQU 0x400E0E4C
PIO_IER EQU 0x400E0460
	
	AREA mycode, CODE, READONLY
	IMPORT __main
	EXPORT interupt
	ENTRY
	
interupt
	; check MOSI
	LDR R2, [R5]
	AND R2, R2, #2_10000000000000000
	SUBS R11,R8,#0
	BNE start 
	SUBS R2,#2_1000000000000000 
	BNE eend  
	MOV R8, #4 
	B eend
	
start
	CMP R2, #2_10
	BEQ high
	LSL R7, #1 
	SUB R8, R8, #1
	B check
high
	LSL R7, #1
	ADD R7, R7, #1
	SUB R8, R8, #1
	B check
	
check
	CMP R8, #0 
	BNE eend
	AND R7, R7, #2_1111 
	CMP R7, #0
	BEQ num0
	CMP R7, #1
	BEQ num1
	CMP R7, #2
	BEQ num2
	CMP R7, #3
	BEQ num3
	CMP R7, #4
	BEQ num4
	CMP R7, #5
	BEQ num5
	CMP R7, #6
	BEQ num6
	CMP R7, #7
	BEQ num7
	CMP R7, #8
	BEQ num8
	CMP R7, #9
	BEQ num9
	
num0
	LDR R5, =PIO_CODR
	LDR R4, =2_1111111
	STR R4, [R5]
	LDR R5, =PIO_SODR
	LDR R4, =2_00000000
	STR R4, [R5]
	B eend
num1
	LDR R5, =PIO_CODR
	LDR R4, =2_1111111
	STR R4, [R5]
	LDR R5, =PIO_SODR
	LDR R4, =2_00000001
	STR R4, [R5]
	B eend
num2
	LDR R5, =PIO_CODR
	LDR R4, =2_1111111
	STR R4, [R5]
	LDR R5, =PIO_SODR
	LDR R4, =2_00000010
	STR R4, [R5]
	B eend
num3
	LDR R5, =PIO_CODR
	LDR R4, =2_1111111
	STR R4, [R5]
	LDR R5, =PIO_SODR
	LDR R4, =2_00000100
	STR R4, [R5]
	B eend
num4
	LDR R5, =PIO_CODR
	LDR R4, =2_1111111
	STR R4, [R5]
	LDR R5, =PIO_SODR
	LDR R4, =2_00001000
	STR R4, [R5]
	B eend
num5
	LDR R5, =PIO_CODR
	LDR R4, =2_1111111
	STR R4, [R5]
	LDR R5, =PIO_SODR
	LDR R4, =2_00010000
	STR R4, [R5]
	B eend
num6
	LDR R5, =PIO_CODR
	LDR R4, =2_1111111
	STR R4, [R5]
	LDR R5, =PIO_SODR
	LDR R4, =2_00100000
	STR R4, [R5]
	B eend
num7
	LDR R5, =PIO_CODR
	LDR R4, =2_1111111
	STR R4, [R5]
	LDR R5, =PIO_SODR
	LDR R4, =2_01000000
	STR R4, [R5]
	B eend
num8
	LDR R5, =PIO_CODR
	LDR R4, =2_1111111
	STR R4, [R5]
	LDR R5, =PIO_SODR
	LDR R4, =2_10000000
	STR R4, [R5]
	B eend
num9
	LDR R5, =PIO_CODR
	LDR R4, =2_1111111
	STR R4, [R5]
	LDR R5, =PIO_SODR
	LDR R4, =0_11000000
	STR R4, [R5]
	B eend

eend
	BX lr
	END
	